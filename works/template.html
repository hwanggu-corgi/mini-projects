<?php $postsList_id = newSN('postsList-', 16); ?>

<div id="<?= $postsList_id ?>" class="newsLiferoads content-style">
	<section class="newsLiferoadsHeader">
		<h2 class="newsLiferoadsTitle">News</h2>
		<a class="viewAllBtn" href="/news">View All</a>
	</section>
	<section class="newsLiferoadsContent">
		<div class="newsLiferoadsContentWrap">
			<items>
				<a href="/{post_page}/{alias}" title="{title}" class="postsItem">
					<div class="postsItemHeader">
						<div class="postsItemDate">
							<span class="postsItemMonth"><format method="date" mask="M">{publishTime}</format></span>
							<span class="postsItemDay"><format method="date" mask="D">{publishTime}</format></span>
						</div>
					</div>
					<div class="postsItemBody">
						<h6 class="postsItemTitle">{title}</h6>
						<p class="postsItemPreview">{preview_cut}</p>
					</div>
				</div>
			</items>
		</div>
	</section>
</div>

<script type="text/javascript">
	$(document).ready(function () {
		(function () {

			// 1. When Ajax completed
			$(document).ajaxComplete(function (event, request, settings) {

				// 2. Get each ajax loaded ".postsItem"
				$("#<?= $postsList_id ?> .postsListWrap > div[style]:not([class]) > .postsItem").each(function () {

					// 3.1 Hide the new items
					// 3.2 Grab them and append them to the list
					// 3.3 Wait for loader image finishes the animation (around 2secs)
					// 3.4 Slide down and show the new items
					// 3.5 Finally clean the style attribute
					$(this)
						.hide()
						.insertAfter($("#<?= $postsList_id ?> .postsListWrap > .postsItem").last())
						.delay(2000)
						.slideDown('fast', function () {
							$(this).removeAttr('style');
						});
				});
			});
		})();
	});
</script>